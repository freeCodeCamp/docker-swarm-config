{
    auto_https off
}

:80 {
    reverse_proxy svc-api:3000 {
        # Load balancing
        lb_policy round_robin
        
        # Health check
        health_uri /status/ping
        health_interval 10s
        health_timeout 2s

        # Forward original client IP and protocol information
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
        header_up X-Forwarded-Host {host}
        
        # Preserve original headers
        header_up Host {upstream_host}
    }
}
